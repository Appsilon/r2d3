(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _html = require('../util/html.js');

var _html2 = _interopRequireDefault(_html);

var _manipulation = require('./manipulation.js');

var _find = require('./find.js');

var _styles = require('./styles.js');

var styles = _interopRequireWildcard(_styles);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function djs(template) {
  if (typeof template === 'string') {
    return (0, _find.find)(template);
  } else if (Array.isArray(template)) {
    for (var _len = arguments.length, substs = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      substs[_key - 1] = arguments[_key];
    }

    return _html2.default.apply(undefined, [template].concat(substs));
  }
}

djs.create = _manipulation.create;
djs.css = styles.css;
djs.addClass = styles.addClass;
djs.removeClass = styles.removeClass;
djs.toggleClass = styles.toggleClass;
djs.containsClass = styles.containsClass;
djs.find = _find.find;
djs.findAll = _find.findAll;
djs.remove = _manipulation.remove;

exports.default = djs;

},{"../util/html.js":7,"./find.js":3,"./manipulation.js":4,"./styles.js":5}],2:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = djsfy;

var _d = require('./d.js');

var _d2 = _interopRequireDefault(_d);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function djsfy(node) {
  if (!node) return null;

  node.find = function (string) {
    return _d2.default.find(string, node);
  };
  node.findAll = function (string) {
    return _d2.default.findAll(string, node);
  };
  node.create = function (string) {
    var element = _d2.default.create(string);

    node.appendChild(element);

    return element;
  };

  node.css = function (cssStyles) {
    return _d2.default.css(node, cssStyles);
  };
  node.addClass = function (classList) {
    return _d2.default.addClass(node, classList);
  };
  node.removeClass = function (classToRemove) {
    return _d2.default.removeClass(node, classToRemove);
  };
  node.toggleClass = function (className, force) {
    return _d2.default.toggleClass(node, className, force);
  };
  node.containsClass = function (className) {
    return _d2.default.containsClass(node, className);
  };
  node.remove = function () {
    var nodeToRemove = arguments.length <= 0 || arguments[0] === undefined ? node : arguments[0];

    var oldNode = _d2.default.remove(nodeToRemove);
    node = null;

    return oldNode;
  };

  return node;
}

},{"./d.js":1}],3:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.find = find;
exports.findAll = findAll;

var _djsfy = require('./djsfy');

var _djsfy2 = _interopRequireDefault(_djsfy);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function find(string) {
  var rootElement = arguments.length <= 1 || arguments[1] === undefined ? document : arguments[1];

  return (0, _djsfy2.default)(rootElement.querySelector(string));
}

function findAll(string) {
  var rootElement = arguments.length <= 1 || arguments[1] === undefined ? document : arguments[1];

  return rootElement.querySelectorAll(string);
}

},{"./djsfy":2}],4:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.create = create;
exports.remove = remove;

var _djsfy = require('./djsfy.js');

var _djsfy2 = _interopRequireDefault(_djsfy);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function create(string) {
  var fragment = document.createDocumentFragment();
  var element = fragment.appendChild(document.createElement('div'));

  element.innerHTML = string.trim();

  if (element.childNodes.length === 1) {
    element = element.lastChild;
  }

  return (0, _djsfy2.default)(element.cloneNode(true));
}

function remove(node) {
  if (node.parentNode) {
    return node.parentNode.removeChild(node);
  }

  return null;
}

},{"./djsfy.js":2}],5:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.css = css;
exports.addClass = addClass;
exports.containsClass = containsClass;
exports.removeClass = removeClass;
exports.toggleClass = toggleClass;

var _djsfy = require('./djsfy');

var _djsfy2 = _interopRequireDefault(_djsfy);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// Edge / IE
var MS = 'ms';
// Chrome / Safari
var WEBKIT = 'webkit';
// Firefox
var MOZ = 'moz';
// Opera
var O = 'o';
var XV = 'xv';
// KDE
var KHTML = 'khtml';

var PREFIXIES = [MS, WEBKIT, MOZ, O, XV, KHTML];

var CSS_PREFIXED = {
  float: 'cssFloat'
};

function css(node, cssStyles) {
  if (!node || node.nodeType === 8 || node.nodeType === 3 || !node.style) {
    return null;
  }

  for (var key in cssStyles) {
    if (Object.hasOwnProperty.call(cssStyles, key)) {
      var keyPrefixed = getStyleWithPrefixKey({
        styleList: node.style,
        styleToCheck: key
      });

      if (keyPrefixed) {
        node.style[keyPrefixed] = cssStyles[key];
      }
    }
  }

  return (0, _djsfy2.default)(node);
}

function addClass(node, classList) {
  var currentClassList = node.getAttribute('class') || '';

  classList = parseArray(classList) || [];

  if (classList instanceof Array) {
    for (var i = 0, length = classList.length; i < length; i++) {
      if (!classList[i].trim()) {
        throw new SyntaxError('djs.addClass(): Empty strings are not valid class name');
      }

      if (!containsClassIntoList(currentClassList, classList[i])) {
        currentClassList += ' ' + classList[i].trim();
      }
    }
  }

  node.setAttribute('class', currentClassList.trim());

  return (0, _djsfy2.default)(node);
}

function containsClass(node, className) {
  if (!node) {
    throw new Error('The element must be not empty.');
  }

  assertClassName(className);

  return containsClassIntoList(node.getAttribute('class'), className);
}

function removeClass(node, classToRemove) {
  var currentClassList = getCurrentClassList(node);

  classToRemove = parseArray(classToRemove) || [];

  if (!currentClassList.length || !classToRemove.length) {
    return (0, _djsfy2.default)(node);
  }

  if (classToRemove instanceof Array) {
    classToRemoveInteraction: for (var i = 0, length = classToRemove.length; i < length; i++) {
      var className = classToRemove[i];
      assertClassName(className);

      currentClassListInteraction: for (var y = 0, _length = currentClassList.length; y < _length; y++) {
        if (className === currentClassList[y]) {
          currentClassList.splice(y, 1);
          continue classToRemoveInteraction;
        }
      }
    }
  }

  node.setAttribute('class', currentClassList.join(' '));

  return (0, _djsfy2.default)(node);
}

function toggleClass(node, className, force) {
  if (!node) {
    throw new Error('The element must be not empty.');
  }

  assertClassName(className);

  var currentClassList = getCurrentClassList(node);

  if (containsClassIntoList(currentClassList, className)) {
    if (!force) {
      removeClass(node, className);
    }
  } else {
    if (force !== false) {
      addClass(node, className);
    }
  }

  return (0, _djsfy2.default)(node);
}

function getCurrentClassList(node) {
  return parseArray(node.getAttribute('class')) || [];
}

function assertClassName(className) {
  if (!className) {
    throw new Error('The className provided (\'' + className + '\') must be not empty.');
  }

  if (containsWhitespaces(className)) {
    throw new Error('The className provided (\'' + className + '\') contains HTML space characters, which are not valid.');
  }
}

function containsWhitespaces(string) {
  return string.match(/\s/);
}

function containsClassIntoList(classList, classToCheck) {
  classList = parseArray(classList) || [];

  for (var i = 0, length = classList.length; i < length; i++) {
    if (classList[i].trim() === classToCheck.trim()) {
      return true;
    }
  }

  return false;
}

function parseArray(classList) {
  if (typeof classList === 'string') {
    classList = classList.split(' ');
  }

  return classList;
}

function getStyleWithPrefixKey(_ref) {
  var styleList = _ref.styleList;
  var styleToCheck = _ref.styleToCheck;

  if (styleToCheck in styleList) {
    return styleToCheck;
  }

  if (styleToCheck in CSS_PREFIXED) {
    return CSS_PREFIXED[styleToCheck];
  }

  for (var i = 0, length = PREFIXIES.length; i < length; i++) {
    var styleWithPrefix = '' + PREFIXIES[i] + styleToCheck[0].toUpperCase() + styleToCheck.substring(1);

    if (styleWithPrefix in styleList) {
      CSS_PREFIXED[styleToCheck] = styleWithPrefix;
      return CSS_PREFIXED[styleToCheck];
    }
  }

  return false;
}

},{"./djsfy":2}],6:[function(require,module,exports){
(function (global){
'use strict';

var _d = require('./djs/d.js');

var _d2 = _interopRequireDefault(_d);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

if (typeof exports === 'object' && typeof module !== 'undefined') {
  module.exports = _d2.default;
} else if (typeof define === 'function' && define.amd) {
  define([], function () {
    return _d2.default;
  });
}

var _global = undefined;

if (typeof window !== 'undefined') {
  _global = window;
} else if (typeof global !== 'undefined') {
  _global = global;
} else if (typeof self !== 'undefined') {
  _global = self;
} else {
  _global = undefined;
}

_global.djs = _d2.default;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./djs/d.js":1}],7:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = htmlStringFromTemplateString;
function htmlStringFromTemplateString(templateObject) {
  var raw = templateObject.raw;

  var result = undefined;

  for (var _len = arguments.length, substs = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    substs[_key - 1] = arguments[_key];
  }

  result = substs.reduce(function (result, subst, i) {
    var lit = raw[i];

    subst = Array.isArray(subst) ? subst.join('') : subst + '';

    if (lit[lit.length - 1] === '$') {
      subst = htmlEscape(subst);
      lit = lit.slice(0, -1);
    }

    result += lit;
    result += subst;

    return result;
  }, '');

  result += raw[raw.length - 1];

  return result;
}

function htmlEscape(str) {
  return str.replace(/&/g, '&amp;').replace(/>/g, '&gt;').replace(/</g, '&lt;').replace(/"/g, '&quote;').replace(/'/g, '&#39;').replace(/`/g, '&#96;');
}

},{}]},{},[6])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvZGpzL2QuanMiLCJzcmMvZGpzL2Rqc2Z5LmpzIiwic3JjL2Rqcy9maW5kLmpzIiwic3JjL2Rqcy9tYW5pcHVsYXRpb24uanMiLCJzcmMvZGpzL3N0eWxlcy5qcyIsInNyYy9pbmRleC5qcyIsInNyYy91dGlsL2h0bWwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7O0lDR1ksTUFBTTs7Ozs7O0FBRWxCLFNBQVMsR0FBRyxDQUFDLFFBQVEsRUFBYTtBQUNoQyxNQUFJLE9BQU8sUUFBUSxLQUFLLFFBQVEsRUFBRTtBQUNoQyxXQUFPLFVBTEgsSUFBSSxFQUtJLFFBQVEsQ0FBQyxDQUFDO0dBQ3ZCLE1BQU0sSUFBRyxLQUFLLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxFQUFFO3NDQUhYLE1BQU07QUFBTixZQUFNOzs7QUFJNUIsV0FBTyxpQ0FBSyxRQUFRLFNBQUssTUFBTSxFQUFDLENBQUM7R0FDbEM7Q0FDRjs7QUFFRCxHQUFHLENBQUMsTUFBTSxpQkFaRixNQUFNLEFBWUssQ0FBQztBQUNwQixHQUFHLENBQUMsR0FBRyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUM7QUFDckIsR0FBRyxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDO0FBQy9CLEdBQUcsQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQztBQUNyQyxHQUFHLENBQUMsV0FBVyxHQUFHLE1BQU0sQ0FBQyxXQUFXLENBQUM7QUFDckMsR0FBRyxDQUFDLGFBQWEsR0FBRyxNQUFNLENBQUMsYUFBYSxDQUFDO0FBQ3pDLEdBQUcsQ0FBQyxJQUFJLFNBakJBLElBQUksQUFpQkcsQ0FBQztBQUNoQixHQUFHLENBQUMsT0FBTyxTQWxCRyxPQUFPLEFBa0JBLENBQUM7QUFDdEIsR0FBRyxDQUFDLE1BQU0saUJBcEJNLE1BQU0sQUFvQkgsQ0FBQzs7a0JBRUws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ZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImltcG9ydCBodG1sIGZyb20gJy4uL3V0aWwvaHRtbC5qcyc7XG5pbXBvcnQge2NyZWF0ZSwgcmVtb3ZlfSBmcm9tICcuL21hbmlwdWxhdGlvbi5qcyc7XG5pbXBvcnQge2ZpbmQsIGZpbmRBbGx9IGZyb20gJy4vZmluZC5qcyc7XG5pbXBvcnQgKiBhcyBzdHlsZXMgZnJvbSAnLi9zdHlsZXMuanMnO1xuXG5mdW5jdGlvbiBkanModGVtcGxhdGUsIC4uLnN1YnN0cykge1xuICBpZiAodHlwZW9mIHRlbXBsYXRlID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBmaW5kKHRlbXBsYXRlKTtcbiAgfSBlbHNlIGlmKEFycmF5LmlzQXJyYXkodGVtcGxhdGUpKSB7XG4gICAgcmV0dXJuIGh0bWwodGVtcGxhdGUsIC4uLnN1YnN0cyk7XG4gIH1cbn1cblxuZGpzLmNyZWF0ZSA9IGNyZWF0ZTtcbmRqcy5jc3MgPSBzdHlsZXMuY3NzO1xuZGpzLmFkZENsYXNzID0gc3R5bGVzLmFkZENsYXNzO1xuZGpzLnJlbW92ZUNsYXNzID0gc3R5bGVzLnJlbW92ZUNsYXNzO1xuZGpzLnRvZ2dsZUNsYXNzID0gc3R5bGVzLnRvZ2dsZUNsYXNzO1xuZGpzLmNvbnRhaW5zQ2xhc3MgPSBzdHlsZXMuY29udGFpbnNDbGFzcztcbmRqcy5maW5kID0gZmluZDtcbmRqcy5maW5kQWxsID0gZmluZEFsbDtcbmRqcy5yZW1vdmUgPSByZW1vdmU7XG5cbmV4cG9ydCBkZWZhdWx0IGRqcztcbiIsImltcG9ydCBkanMgZnJvbSAnLi9kLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZGpzZnkobm9kZSkge1xuICBpZiAoIW5vZGUpIHJldHVybiBudWxsO1xuXG4gIG5vZGUuZmluZCA9IChzdHJpbmcpID0+IGRqcy5maW5kKHN0cmluZywgbm9kZSk7XG4gIG5vZGUuZmluZEFsbCA9IChzdHJpbmcpID0+IGRqcy5maW5kQWxsKHN0cmluZywgbm9kZSk7XG4gIG5vZGUuY3JlYXRlID0gKHN0cmluZykgPT4ge1xuICAgIGxldCBlbGVtZW50ID0gZGpzLmNyZWF0ZShzdHJpbmcpO1xuXG4gICAgbm9kZS5hcHBlbmRDaGlsZChlbGVtZW50KTtcblxuICAgIHJldHVybiBlbGVtZW50O1xuICB9O1xuXG4gIG5vZGUuY3NzID0gKGNzc1N0eWxlcykgPT4gZGpzLmNzcyhub2RlLCBjc3NTdHlsZXMpO1xuICBub2RlLmFkZENsYXNzID0gKGNsYXNzTGlzdCkgPT4gZGpzLmFkZENsYXNzKG5vZGUsIGNsYXNzTGlzdCk7XG4gIG5vZGUucmVtb3ZlQ2xhc3MgPSAoY2xhc3NUb1JlbW92ZSkgPT4gZGpzLnJlbW92ZUNsYXNzKG5vZGUsIGNsYXNzVG9SZW1vdmUpO1xuICBub2RlLnRvZ2dsZUNsYXNzID0gKGNsYXNzTmFtZSwgZm9yY2UpID0+IGRqcy50b2dnbGVDbGFzcyhub2RlLCBjbGFzc05hbWUsIGZvcmNlKTtcbiAgbm9kZS5jb250YWluc0NsYXNzID0gKGNsYXNzTmFtZSkgPT4gZGpzLmNvbnRhaW5zQ2xhc3Mobm9kZSwgY2xhc3NOYW1lKTtcbiAgbm9kZS5yZW1vdmUgPSAobm9kZVRvUmVtb3ZlPW5vZGUpID0+IHtcbiAgICBsZXQgb2xkTm9kZSA9IGRqcy5yZW1vdmUobm9kZVRvUmVtb3ZlKTtcbiAgICBub2RlID0gbnVsbDtcblxuICAgIHJldHVybiBvbGROb2RlO1xuICB9O1xuXG4gIHJldHVybiBub2RlO1xufSIsImltcG9ydCBkanNmeSBmcm9tICcuL2Rqc2Z5JztcblxuZXhwb3J0IGZ1bmN0aW9uIGZpbmQoc3RyaW5nLCByb290RWxlbWVudD1kb2N1bWVudCkge1xuICByZXR1cm4gZGpzZnkocm9vdEVsZW1lbnQucXVlcnlTZWxlY3RvcihzdHJpbmcpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRBbGwoc3RyaW5nLCByb290RWxlbWVudD1kb2N1bWVudCkge1xuICByZXR1cm4gcm9vdEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChzdHJpbmcpO1xufSIsImltcG9ydCBkanNmeSBmcm9tICcuL2Rqc2Z5LmpzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZShzdHJpbmcpIHtcbiAgbGV0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICBsZXQgZWxlbWVudCA9IGZyYWdtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKTtcblxuICBlbGVtZW50LmlubmVySFRNTCA9IHN0cmluZy50cmltKCk7XG5cbiAgaWYgKGVsZW1lbnQuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEpIHtcbiAgICBlbGVtZW50ID0gZWxlbWVudC5sYXN0Q2hpbGQ7XG4gIH1cblxuICByZXR1cm4gZGpzZnkoZWxlbWVudC5jbG9uZU5vZGUodHJ1ZSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlKG5vZGUpIHtcbiAgaWYgKG5vZGUucGFyZW50Tm9kZSkge1xuICAgIHJldHVybiBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn0iLCJpbXBvcnQgZGpzZnkgZnJvbSAnLi9kanNmeSc7XG5cbi8vIEVkZ2UgLyBJRVxuY29uc3QgTVMgPSAnbXMnO1xuLy8gQ2hyb21lIC8gU2FmYXJpXG5jb25zdCBXRUJLSVQgPSAnd2Via2l0Jztcbi8vIEZpcmVmb3hcbmNvbnN0IE1PWiA9ICdtb3onO1xuLy8gT3BlcmFcbmNvbnN0IE8gPSAnbyc7XG5jb25zdCBYViA9ICd4dic7XG4vLyBLREVcbmNvbnN0IEtIVE1MID0gJ2todG1sJzsgXG5cbmNvbnN0IFBSRUZJWElFUyA9IFtNUywgV0VCS0lULCBNT1osIE8sIFhWLCBLSFRNTF07XG5cbmNvbnN0IENTU19QUkVGSVhFRCA9IHtcbiAgZmxvYXQ6ICdjc3NGbG9hdCdcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBjc3Mobm9kZSwgY3NzU3R5bGVzKSB7XG4gIGlmICghbm9kZSB8fCBub2RlLm5vZGVUeXBlID09PSA4IHx8IG5vZGUubm9kZVR5cGUgPT09IDMgfHwgIW5vZGUuc3R5bGUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGZvciAobGV0IGtleSBpbiBjc3NTdHlsZXMpIHtcbiAgICBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoY3NzU3R5bGVzLCBrZXkpKSB7XG4gICAgICBsZXQga2V5UHJlZml4ZWQgPSBnZXRTdHlsZVdpdGhQcmVmaXhLZXkoe1xuICAgICAgICBzdHlsZUxpc3Q6IG5vZGUuc3R5bGUsIFxuICAgICAgICBzdHlsZVRvQ2hlY2s6IGtleVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChrZXlQcmVmaXhlZCkge1xuICAgICAgICBub2RlLnN0eWxlW2tleVByZWZpeGVkXSA9IGNzc1N0eWxlc1trZXldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBkanNmeShub2RlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZENsYXNzKG5vZGUsIGNsYXNzTGlzdCkge1xuICBsZXQgY3VycmVudENsYXNzTGlzdCA9IG5vZGUuZ2V0QXR0cmlidXRlKCdjbGFzcycpIHx8ICcnO1xuXG4gIGNsYXNzTGlzdCA9IHBhcnNlQXJyYXkoY2xhc3NMaXN0KSB8fCBbXTtcblxuICBpZiAoY2xhc3NMaXN0IGluc3RhbmNlb2YgQXJyYXkpe1xuICAgIGZvciAobGV0IGkgPSAwLCBsZW5ndGggPSBjbGFzc0xpc3QubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghY2xhc3NMaXN0W2ldLnRyaW0oKSkge1xuICAgICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoJ2Rqcy5hZGRDbGFzcygpOiBFbXB0eSBzdHJpbmdzIGFyZSBub3QgdmFsaWQgY2xhc3MgbmFtZScpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWNvbnRhaW5zQ2xhc3NJbnRvTGlzdChjdXJyZW50Q2xhc3NMaXN0LCBjbGFzc0xpc3RbaV0pKSB7XG4gICAgICAgIGN1cnJlbnRDbGFzc0xpc3QgKz0gJyAnICsgY2xhc3NMaXN0W2ldLnRyaW0oKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBub2RlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjdXJyZW50Q2xhc3NMaXN0LnRyaW0oKSk7XG5cbiAgcmV0dXJuIGRqc2Z5KG5vZGUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29udGFpbnNDbGFzcyhub2RlLCBjbGFzc05hbWUpIHtcbiAgaWYgKCFub2RlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgZWxlbWVudCBtdXN0IGJlIG5vdCBlbXB0eS4nKTtcbiAgfVxuXG4gIGFzc2VydENsYXNzTmFtZShjbGFzc05hbWUpO1xuXG4gIHJldHVybiBjb250YWluc0NsYXNzSW50b0xpc3Qobm9kZS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJyksIGNsYXNzTmFtZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVDbGFzcyhub2RlLCBjbGFzc1RvUmVtb3ZlKSB7XG4gIGxldCBjdXJyZW50Q2xhc3NMaXN0ID0gZ2V0Q3VycmVudENsYXNzTGlzdChub2RlKTtcblxuICBjbGFzc1RvUmVtb3ZlID0gcGFyc2VBcnJheShjbGFzc1RvUmVtb3ZlKSB8fCBbXTtcblxuICBpZiAoIWN1cnJlbnRDbGFzc0xpc3QubGVuZ3RoIHx8ICFjbGFzc1RvUmVtb3ZlLmxlbmd0aCkge1xuICAgIHJldHVybiBkanNmeShub2RlKTtcbiAgfVxuXG4gIGlmIChjbGFzc1RvUmVtb3ZlIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICBjbGFzc1RvUmVtb3ZlSW50ZXJhY3Rpb246XG4gICAgZm9yKGxldCBpID0gMCwgbGVuZ3RoID0gY2xhc3NUb1JlbW92ZS5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGNsYXNzTmFtZSA9IGNsYXNzVG9SZW1vdmVbaV07XG4gICAgICBhc3NlcnRDbGFzc05hbWUoY2xhc3NOYW1lKTtcblxuICAgICAgY3VycmVudENsYXNzTGlzdEludGVyYWN0aW9uOlxuICAgICAgZm9yKGxldCB5ID0gMCwgbGVuZ3RoID0gY3VycmVudENsYXNzTGlzdC5sZW5ndGg7IHkgPCBsZW5ndGg7IHkrKykge1xuICAgICAgICBpZiAoY2xhc3NOYW1lID09PSBjdXJyZW50Q2xhc3NMaXN0W3ldKSB7XG4gICAgICAgICAgY3VycmVudENsYXNzTGlzdC5zcGxpY2UoeSwgMSk7XG4gICAgICAgICAgY29udGludWUgY2xhc3NUb1JlbW92ZUludGVyYWN0aW9uO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgY3VycmVudENsYXNzTGlzdC5qb2luKCcgJykpO1xuXG4gIHJldHVybiBkanNmeShub2RlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZUNsYXNzKG5vZGUsIGNsYXNzTmFtZSwgZm9yY2UpIHtcbiAgaWYgKCFub2RlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgZWxlbWVudCBtdXN0IGJlIG5vdCBlbXB0eS4nKTtcbiAgfVxuXG4gIGFzc2VydENsYXNzTmFtZShjbGFzc05hbWUpO1xuXG4gIGxldCBjdXJyZW50Q2xhc3NMaXN0ID0gZ2V0Q3VycmVudENsYXNzTGlzdChub2RlKTtcblxuICBpZiAoY29udGFpbnNDbGFzc0ludG9MaXN0KGN1cnJlbnRDbGFzc0xpc3QsIGNsYXNzTmFtZSkpIHtcbiAgICBpZiAoIWZvcmNlKSB7XG4gICAgICByZW1vdmVDbGFzcyhub2RlLCBjbGFzc05hbWUpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoZm9yY2UgIT09IGZhbHNlKSB7XG4gICAgICBhZGRDbGFzcyhub2RlLCBjbGFzc05hbWUpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBkanNmeShub2RlKTtcbn1cblxuZnVuY3Rpb24gZ2V0Q3VycmVudENsYXNzTGlzdChub2RlKSB7XG4gIHJldHVybiBwYXJzZUFycmF5KG5vZGUuZ2V0QXR0cmlidXRlKCdjbGFzcycpKSB8fCBbXTtcbn1cblxuZnVuY3Rpb24gYXNzZXJ0Q2xhc3NOYW1lKGNsYXNzTmFtZSkge1xuICBpZiAoIWNsYXNzTmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgVGhlIGNsYXNzTmFtZSBwcm92aWRlZCAoJyR7Y2xhc3NOYW1lfScpIG11c3QgYmUgbm90IGVtcHR5LmApO1xuICB9XG5cbiAgaWYgKGNvbnRhaW5zV2hpdGVzcGFjZXMoY2xhc3NOYW1lKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgVGhlIGNsYXNzTmFtZSBwcm92aWRlZCAoJyR7Y2xhc3NOYW1lfScpIGNvbnRhaW5zIEhUTUwgc3BhY2UgY2hhcmFjdGVycywgd2hpY2ggYXJlIG5vdCB2YWxpZC5gKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjb250YWluc1doaXRlc3BhY2VzKHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLm1hdGNoKC9cXHMvKTtcbn1cblxuZnVuY3Rpb24gY29udGFpbnNDbGFzc0ludG9MaXN0KGNsYXNzTGlzdCwgY2xhc3NUb0NoZWNrKSB7XG4gIGNsYXNzTGlzdCA9IHBhcnNlQXJyYXkoY2xhc3NMaXN0KSB8fCBbXTtcblxuICBmb3IgKGxldCBpID0gMCwgbGVuZ3RoID0gY2xhc3NMaXN0Lmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGNsYXNzTGlzdFtpXS50cmltKCkgPT09IGNsYXNzVG9DaGVjay50cmltKCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gcGFyc2VBcnJheShjbGFzc0xpc3QpIHtcbiAgaWYgKHR5cGVvZiBjbGFzc0xpc3QgPT09ICdzdHJpbmcnKSB7XG4gICAgY2xhc3NMaXN0ID0gY2xhc3NMaXN0LnNwbGl0KCcgJyk7XG4gIH1cblxuICByZXR1cm4gY2xhc3NMaXN0O1xufVxuXG5mdW5jdGlvbiBnZXRTdHlsZVdpdGhQcmVmaXhLZXkoe3N0eWxlTGlzdCwgc3R5bGVUb0NoZWNrfSkge1xuICBpZiAoc3R5bGVUb0NoZWNrIGluIHN0eWxlTGlzdCkge1xuICAgIHJldHVybiBzdHlsZVRvQ2hlY2s7XG4gIH1cblxuICBpZiAoc3R5bGVUb0NoZWNrIGluIENTU19QUkVGSVhFRCkge1xuICAgIHJldHVybiBDU1NfUFJFRklYRURbc3R5bGVUb0NoZWNrXTtcbiAgfVxuXG4gIGZvciAobGV0IGkgPSAwLCBsZW5ndGggPSBQUkVGSVhJRVMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgc3R5bGVXaXRoUHJlZml4ID0gYCR7UFJFRklYSUVTW2ldfSR7c3R5bGVUb0NoZWNrWzBdLnRvVXBwZXJDYXNlKCl9JHtzdHlsZVRvQ2hlY2suc3Vic3RyaW5nKDEpfWA7XG5cbiAgICBpZiAoc3R5bGVXaXRoUHJlZml4IGluIHN0eWxlTGlzdCkge1xuICAgICAgQ1NTX1BSRUZJWEVEW3N0eWxlVG9DaGVja10gPSBzdHlsZVdpdGhQcmVmaXg7XG4gICAgICByZXR1cm4gQ1NTX1BSRUZJWEVEW3N0eWxlVG9DaGVja107XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufSIsImltcG9ydCBkanMgZnJvbSAnLi9kanMvZC5qcyc7XG5cbmlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSBkanM7XG59IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICBkZWZpbmUoW10sICgpID0+IGRqcyk7XG59XG5cbmxldCBfZ2xvYmFsO1xuXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgX2dsb2JhbCA9IHdpbmRvdztcbn0gZWxzZSBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgX2dsb2JhbCA9IGdsb2JhbDtcbn0gZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XG4gIF9nbG9iYWwgPSBzZWxmO1xufSBlbHNlIHtcbiAgX2dsb2JhbCA9IHRoaXM7XG59XG5cbl9nbG9iYWwuZGpzID0gZGpzO1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaHRtbFN0cmluZ0Zyb21UZW1wbGF0ZVN0cmluZyh0ZW1wbGF0ZU9iamVjdCwgLi4uc3Vic3RzKSB7XG4gIGxldCByYXcgPSB0ZW1wbGF0ZU9iamVjdC5yYXc7XG5cbiAgbGV0IHJlc3VsdDtcblxuICByZXN1bHQgPSBzdWJzdHMucmVkdWNlKChyZXN1bHQsIHN1YnN0LCBpKSA9PiB7XG4gICAgbGV0IGxpdCA9IHJhd1tpXTtcblxuICAgIHN1YnN0ID0gQXJyYXkuaXNBcnJheShzdWJzdCkgPyBzdWJzdC5qb2luKCcnKSA6IHN1YnN0ICsgJyc7XG5cbiAgICBpZiAobGl0W2xpdC5sZW5ndGgtMV0gPT09ICckJykge1xuICAgICAgc3Vic3QgPSBodG1sRXNjYXBlKHN1YnN0KTtcbiAgICAgIGxpdCA9IGxpdC5zbGljZSgwLCAtMSk7XG4gICAgfVxuXG4gICAgcmVzdWx0ICs9IGxpdDtcbiAgICByZXN1bHQgKz0gc3Vic3Q7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9LCAnJyk7XG5cbiAgcmVzdWx0ICs9IHJhd1tyYXcubGVuZ3RoLTFdO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIGh0bWxFc2NhcGUoc3RyKSB7XG4gIHJldHVybiBzdHJcbiAgICAucmVwbGFjZSgvJi9nLCAnJmFtcDsnKVxuICAgIC5yZXBsYWNlKC8+L2csICcmZ3Q7JylcbiAgICAucmVwbGFjZSgvPC9nLCAnJmx0OycpXG4gICAgLnJlcGxhY2UoL1wiL2csICcmcXVvdGU7JylcbiAgICAucmVwbGFjZSgvJy9nLCAnJiMzOTsnKVxuICAgIC5yZXBsYWNlKC9gL2csICcmIzk2OycpO1xufSJdfQ==
